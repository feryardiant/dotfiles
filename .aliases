# Easier navigation: .., ..., ...., ....., ~ and -
alias ..="cd .."
alias ...="cd ../.."
alias ....="cd ../../.."
alias .....="cd ../../../.."
alias ~="cd $HOME" # `cd` is probably faster to type though

# Shortcuts
alias h="history"
alias st="subl -a"
alias gac="git a && git c"

# Detect which `ls` flavor is in use
if ls --color > /dev/null 2>&1; then # GNU `ls`
	colorflag="--color"
else # OS X `ls`
	colorflag="-G"
fi

# eval $(dircolors -b ~/.dircolors)
alias grep='grep ${colorflag}'
alias fgrep='fgrep ${colorflag}'
alias egrep='egrep ${colorflag}'

if pygmentize -V > /dev/null 2>&1; then
	alias ccat='pygmentize -g'
fi

# Always use color output for `ls`
alias ls="command ls ${colorflag} --group-directories-first"

# List all files colorized in long format
alias l="ls -lF"
# List all files colorized in long format, including dot files
alias la="ls -laF"
# List only directories
alias ld='l | grep "^d"'
# List only directories, including dot files
alias lad='la | grep "^d"'
# List only links
alias ll='l | grep "^l"'
# List only links, including dot files
alias lal='la | grep "^l"'
# List all contents exclude directory
alias lf='l | grep "^-"'
# List all contents include the dotfiles and still witout directory
alias laf='la | grep "^-"'

# Stopwatch
alias timer='echo "Timer started. Stop with Ctrl-D." && date && time cat && date'

# Disable XDebug for composer
# @see: http://stackoverflow.com/a/31083865/881743
if [ -d "/usr/lib/php5" ]; then
	options=$(ls -1 /usr/lib/php5/20131226/| \
	    grep --invert-match xdebug| \
	    # remove problematic extensions
	    egrep --invert-match 'mysql|wddx|pgsql|opcache'| \
	    sed --expression 's/\(.*\)/ --define extension=\1/'| \
	    # join everything together back in one big line
	    tr --delete '\n'
	)
elif [ -d "/usr/lib/php/7.0" ]; then
	options=$(ls -1 /usr/lib/php/20151012/| \
	    grep --invert-match xdebug| \
	    # remove problematic extensions
	    egrep --invert-match 'mysql|wddx|pgsql|opcache'| \
	    sed --expression 's/\(.*\)/ --define extension=\1/'| \
	    # join everything together back in one big line
	    tr --delete '\n'
	)
fi

alias composer='php --no-php-ini $options ~/.local/bin/composer $*'

# Add an "alert" alias for long running commands.  Use like so:
#   sleep 10; alert
alias alert='notify-send --urgency=low -i "$([ $? = 0 ] && echo terminal || echo error)" "$(history|tail -n1|sed -e '\''s/^\s*[0-9]\+\s*//;s/[;&|]\s*alert$//'\'')"'

if apt-get &> /dev/null; then
	alias ag-pasang='sudo apt-get install'
	alias ag-copot='sudo apt-get purge'
	alias ag-sundul='sudo apt-get update'
	alias ag-angkat='sudo apt-get dist-upgrade'
	alias ag-dongkrak='ag-sundul && ag-angkat'
	alias ag-sapu='sudo apt-get clean && sudo apt-get autoclean && sudo apt-get autoremove'
fi

if sudo &> /dev/null; then
	alias ap2conf="sudo $EDITOR /etc/apache2/apache2.conf"
	alias phpconf="sudo $EDITOR /etc/php5/apache2/php.ini"
	alias mysqlconf="sudo $EDITOR /etc/mysql/my.cnf"
	alias ftpconf="sudo $EDITOR /etc/vsftpd.conf"

	alias vhdir="cd /etc/apache2/sites-available/"
else
	server_dir=/cygdrive/c/utils/server
	alias ap2conf="$EDITOR $server_dir/apache/conf/httpd.conf"
	alias phpconf="$EDITOR $server_dir/php/php.ini"
	alias mysqlconf="$EDITOR $server_dir/mysql/my.cnf"
	alias ftpconf="$EDITOR $server_dir/vsftpd.conf"

	alias vhdir="cd $server_dir/apache/conf/vhost/"
fi
